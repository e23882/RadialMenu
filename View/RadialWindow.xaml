<Window
    x:Class="RadialMenu.RadialWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="RadialWindow"
    AllowsTransparency="True"
    Background="Transparent"
    ResizeMode="NoResize"
    ShowInTaskbar="False"
    SizeToContent="WidthAndHeight"
    Topmost="True"
    WindowStyle="None">

    <Grid
        x:Name="RootLayout"
        Width="200"
        Height="200"
        MouseLeave="RootLayout_MouseLeave"
        Opacity="{Binding PanelOpacity}">
        <Grid.Resources>
            <!--  Style for the pie-slice buttons  -->
            <Style x:Key="PieSliceButton" TargetType="Button">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Grid>
                                <!--  The Path defines the pie slice shape (top-right quadrant)  -->
                                <Path
                                    x:Name="ButtonPath"
                                    Data="M 100,100 L 100,0 A 100,100 0 0 1 200,100 Z"
                                    Fill="{TemplateBinding Background}"
                                    Stroke="#FF555555"
                                    StrokeThickness="1" />
                                <!--  The ContentPresenter displays the button's content (e.g., text)  -->
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <ContentPresenter.RenderTransform>
                                        <TranslateTransform X="50" Y="-50" />
                                    </ContentPresenter.RenderTransform>
                                </ContentPresenter>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="ButtonPath" Property="Fill" Value="#AA555555" />
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="ButtonPath" Property="Fill" Value="#AA000000" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Grid.Resources>

        <!--  左上 Button  -->
        <Button
            x:Name="Button1"
            Background="{Binding PanelColor}"
            Command="{Binding TopButtonClickCommand}"
            FontSize="20"
            RenderTransformOrigin="0.5,0.5"
            Style="{StaticResource PieSliceButton}">
            <Button.Content>
                <TextBlock FontSize="{Binding FontSize}" Text="{Binding Button1Text}">
                    <TextBlock.RenderTransform>
                        <TransformGroup>
                            <RotateTransform Angle="{Binding Button1ContentRotationAngle}" />
                            <TranslateTransform X="15" Y="-8" />
                        </TransformGroup>
                    </TextBlock.RenderTransform>
                </TextBlock>
            </Button.Content>
            <Button.RenderTransform>
                <RotateTransform Angle="-90" />
            </Button.RenderTransform>
        </Button>

        <!--  右上 Button  -->
        <Button
            x:Name="Button2"
            Background="{Binding PanelColor}"
            Command="{Binding RightButtonClickCommand}"
            FontSize="{Binding FontSize}"
            RenderTransformOrigin="0.5,0.5"
            Style="{StaticResource PieSliceButton}">
            <Button.RenderTransform>
                <RotateTransform Angle="0" />
            </Button.RenderTransform>
            <Button.Content>
                <TextBlock FontSize="{Binding FontSize}" Text="{Binding Button2Text}">
                    <TextBlock.RenderTransform>
                        <TransformGroup>
                            <TranslateTransform X="-10" Y="20" />
                        </TransformGroup>
                    </TextBlock.RenderTransform>
                </TextBlock>
            </Button.Content>
        </Button>

        <!--  右下 Button  -->
        <Button
            x:Name="Button3"
            Background="{Binding PanelColor}"
            Command="{Binding ButtonSideButtonClickCommand}"
            RenderTransformOrigin="0.5,0.5"
            Style="{StaticResource PieSliceButton}">
            <Button.Content>
                <TextBlock FontSize="{Binding FontSize}" Text="{Binding Button3Text}">
                    <TextBlock.RenderTransform>
                        <TransformGroup>
                            <RotateTransform Angle="{Binding Button3ContentRotationAngle}" />
                            <TranslateTransform X="-4" Y="50" />
                        </TransformGroup>
                    </TextBlock.RenderTransform>
                </TextBlock>
            </Button.Content>
            <Button.RenderTransform>
                <RotateTransform Angle="90" />
            </Button.RenderTransform>
        </Button>

        <!--  左下 Button  -->
        <Button
            x:Name="Button4"
            Background="{Binding PanelColor}"
            Command="{Binding LeftButtonClickCommand}"
            FontSize="20"
            RenderTransformOrigin="0.5,0.5"
            Style="{StaticResource PieSliceButton}">
            <Button.Content>
                <TextBlock FontSize="{Binding FontSize}" Text="{Binding Button4Text}">
                    <TextBlock.RenderTransform>
                        <TransformGroup>
                            <RotateTransform Angle="{Binding Button4ContentRotationAngle}" />
                            <TranslateTransform X="23" Y="32" />
                        </TransformGroup>
                    </TextBlock.RenderTransform>
                </TextBlock>
            </Button.Content>
            <Button.RenderTransform>
                <RotateTransform Angle="180" />
            </Button.RenderTransform>
        </Button>
    </Grid>
</Window>
